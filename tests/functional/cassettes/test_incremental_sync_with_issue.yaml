interactions:
- request:
    body:
      description: Repository with issue for incremental_sync test
      name: vcr-test-sync-issue
      private: false
    headers: {}
    method: POST
    uri: http://localhost:3000/api/v1/user/repos
  response:
    body:
      string: '{"id":9,"owner":{"id":1,"login":"gitea_admin","login_name":"","source_id":0,"full_name":"","email":"bryantd95@gmail.com","avatar_url":"http://localhost:3000/avatar/93330982c2376665c83d2a392baaaab5","html_url":"http://localhost:3000/gitea_admin","language":"","is_admin":false,"last_login":"0001-01-01T00:00:00Z","created":"2026-01-16T21:34:12Z","restricted":false,"active":false,"prohibit_login":false,"location":"","website":"","description":"","visibility":"public","followers_count":0,"following_count":0,"starred_repos_count":0,"username":"gitea_admin"},"name":"vcr-test-sync-issue","full_name":"gitea_admin/vcr-test-sync-issue","description":"Repository
        with issue for incremental_sync test","empty":true,"private":false,"fork":false,"template":false,"mirror":false,"size":22,"language":"","languages_url":"http://localhost:3000/api/v1/repos/gitea_admin/vcr-test-sync-issue/languages","html_url":"http://localhost:3000/gitea_admin/vcr-test-sync-issue","url":"http://localhost:3000/api/v1/repos/gitea_admin/vcr-test-sync-issue","link":"","ssh_url":"git@127.0.0.1:gitea_admin/vcr-test-sync-issue.git","clone_url":"http://localhost:3000/gitea_admin/vcr-test-sync-issue.git","original_url":"","website":"","stars_count":0,"forks_count":0,"watchers_count":1,"open_issues_count":0,"open_pr_counter":0,"release_counter":0,"default_branch":"main","archived":false,"created_at":"2026-02-03T23:15:56Z","updated_at":"2026-02-03T23:15:57Z","archived_at":"1970-01-01T00:00:00Z","permissions":{"admin":true,"push":true,"pull":true},"has_code":false,"has_issues":true,"internal_tracker":{"enable_time_tracker":true,"allow_only_contributors_to_track_time":true,"enable_issue_dependencies":true},"has_wiki":true,"has_pull_requests":true,"has_projects":true,"projects_mode":"all","has_releases":true,"has_packages":true,"has_actions":true,"ignore_whitespace_conflicts":false,"allow_merge_commits":true,"allow_rebase":true,"allow_rebase_explicit":true,"allow_squash_merge":true,"allow_fast_forward_only_merge":true,"allow_rebase_update":true,"allow_manual_merge":false,"autodetect_manual_merge":false,"default_delete_branch_after_merge":false,"default_merge_style":"merge","default_allow_maintainer_edit":false,"avatar_url":"","internal":false,"mirror_interval":"","object_format_name":"sha1","mirror_updated":"0001-01-01T00:00:00Z","topics":[],"licenses":[]}

        '
    headers:
      Cache-Control:
      - max-age=0, private, must-revalidate, no-transform
      Content-Type:
      - application/json;charset=utf-8
      Date:
      - Tue, 03 Feb 2026 23:15:57 GMT
      Transfer-Encoding:
      - chunked
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - SAMEORIGIN
    status:
      code: 201
      message: Created
- request:
    body:
      body: This is a test issue for incremental sync testing.
      title: test issue
    headers: {}
    method: POST
    uri: http://localhost:3000/api/v1/repos/gitea_admin/vcr-test-sync-issue/issues
  response:
    body:
      string: '{"id":15,"url":"http://localhost:3000/api/v1/repos/gitea_admin/vcr-test-sync-issue/issues/1","html_url":"http://localhost:3000/gitea_admin/vcr-test-sync-issue/issues/1","number":1,"user":{"id":1,"login":"gitea_admin","login_name":"","source_id":0,"full_name":"","email":"bryantd95@gmail.com","avatar_url":"http://localhost:3000/avatar/93330982c2376665c83d2a392baaaab5","html_url":"http://localhost:3000/gitea_admin","language":"en-US","is_admin":true,"last_login":"2026-02-03T21:25:58Z","created":"2026-01-16T21:34:12Z","restricted":false,"active":true,"prohibit_login":false,"location":"","website":"","description":"","visibility":"public","followers_count":0,"following_count":0,"starred_repos_count":0,"username":"gitea_admin"},"original_author":"","original_author_id":0,"title":"test
        issue","body":"This is a test issue for incremental sync testing.","ref":"","assets":[],"labels":[],"milestone":null,"assignee":null,"assignees":null,"state":"open","is_locked":false,"comments":0,"created_at":"2026-02-03T23:15:57Z","updated_at":"2026-02-03T23:15:57Z","closed_at":null,"due_date":null,"time_estimate":0,"pull_request":null,"repository":{"id":9,"name":"vcr-test-sync-issue","owner":"gitea_admin","full_name":"gitea_admin/vcr-test-sync-issue"},"pin_order":0}

        '
    headers:
      Cache-Control:
      - max-age=0, private, must-revalidate, no-transform
      Content-Length:
      - '1263'
      Content-Type:
      - application/json;charset=utf-8
      Date:
      - Tue, 03 Feb 2026 23:15:57 GMT
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - SAMEORIGIN
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      User-Agent:
      - soliplex-agent
    method: GET
    uri: http://localhost:8000/api/v1/sync-state/gitea:gitea_admin:vcr-test-sync-issue
  response:
    body:
      string: '{"source_id":"gitea:gitea_admin:vcr-test-sync-issue","last_commit_sha":null,"last_sync_date":null,"branch":"main","sync_metadata":{}}'
    headers:
      Content-Length:
      - '133'
      Content-Type:
      - application/json
      Date:
      - Tue, 03 Feb 2026 23:15:57 GMT
      Server:
      - uvicorn
    status:
      code: 200
      message: OK
- request:
    body: null
    headers: {}
    method: GET
    uri: http://localhost:3000/api/v1/repos/gitea_admin/vcr-test-sync-issue/contents?ref=main
  response:
    body:
      string: '{"errors":["object does not exist [id: main, rel_path: ]"],"message":"not
        found","url":"http://localhost:3000/api/swagger"}

        '
    headers:
      Cache-Control:
      - max-age=0, private, must-revalidate, no-transform
      Content-Length:
      - '124'
      Content-Type:
      - application/json;charset=utf-8
      Date:
      - Tue, 03 Feb 2026 23:15:57 GMT
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - SAMEORIGIN
    status:
      code: 404
      message: Not Found
- request:
    body: null
    headers: {}
    method: GET
    uri: http://localhost:3000/api/v1/repos/gitea_admin/vcr-test-sync-issue/issues?page=1&status=all
  response:
    body:
      string: '[{"id":15,"url":"http://localhost:3000/api/v1/repos/gitea_admin/vcr-test-sync-issue/issues/1","html_url":"http://localhost:3000/gitea_admin/vcr-test-sync-issue/issues/1","number":1,"user":{"id":1,"login":"gitea_admin","login_name":"","source_id":0,"full_name":"","email":"bryantd95@gmail.com","avatar_url":"http://localhost:3000/avatar/93330982c2376665c83d2a392baaaab5","html_url":"http://localhost:3000/gitea_admin","language":"en-US","is_admin":true,"last_login":"2026-02-03T21:25:58Z","created":"2026-01-16T21:34:12Z","restricted":false,"active":true,"prohibit_login":false,"location":"","website":"","description":"","visibility":"public","followers_count":0,"following_count":0,"starred_repos_count":0,"username":"gitea_admin"},"original_author":"","original_author_id":0,"title":"test
        issue","body":"This is a test issue for incremental sync testing.","ref":"","assets":[],"labels":[],"milestone":null,"assignee":null,"assignees":null,"state":"open","is_locked":false,"comments":0,"created_at":"2026-02-03T23:15:57Z","updated_at":"2026-02-03T23:15:57Z","closed_at":null,"due_date":null,"time_estimate":0,"pull_request":null,"repository":{"id":9,"name":"vcr-test-sync-issue","owner":"gitea_admin","full_name":"gitea_admin/vcr-test-sync-issue"},"pin_order":0}]

        '
    headers:
      Access-Control-Expose-Headers:
      - X-Total-Count
      Cache-Control:
      - max-age=0, private, must-revalidate, no-transform
      Content-Length:
      - '1265'
      Content-Type:
      - application/json;charset=utf-8
      Date:
      - Tue, 03 Feb 2026 23:15:58 GMT
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - SAMEORIGIN
      X-Total-Count:
      - '1'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers: {}
    method: GET
    uri: http://localhost:3000/api/v1/repos/gitea_admin/vcr-test-sync-issue/issues?page=2&status=all
  response:
    body:
      string: '[]

        '
    headers:
      Access-Control-Expose-Headers:
      - X-Total-Count
      Cache-Control:
      - max-age=0, private, must-revalidate, no-transform
      Content-Length:
      - '3'
      Content-Type:
      - application/json;charset=utf-8
      Date:
      - Tue, 03 Feb 2026 23:15:58 GMT
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - SAMEORIGIN
      X-Total-Count:
      - '1'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers: {}
    method: GET
    uri: http://localhost:3000/api/v1/repos/gitea_admin/vcr-test-sync-issue/issues/comments?page=1
  response:
    body:
      string: '[]

        '
    headers:
      Access-Control-Expose-Headers:
      - X-Total-Count
      Cache-Control:
      - max-age=0, private, must-revalidate, no-transform
      Content-Length:
      - '3'
      Content-Type:
      - application/json;charset=utf-8
      Date:
      - Tue, 03 Feb 2026 23:15:58 GMT
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - SAMEORIGIN
      X-Total-Count:
      - '0'
    status:
      code: 200
      message: OK
- request:
    body: !!python/object:aiohttp.formdata.FormData
      _charset: null
      _fields:
      - !!python/tuple
        - !!python/object/apply:multidict._multidict.MultiDict
          - - !!python/tuple
              - name
              - source
        - {}
        - gitea:gitea_admin:vcr-test-sync-issue
      - !!python/tuple
        - !!python/object/apply:multidict._multidict.MultiDict
          - - !!python/tuple
              - name
              - hashes
        - {}
        - '{"/gitea_admin/vcr-test-sync-issue/issues/1": "ffc653ca77fc72849856da353224fb54282b9482d4a6fe51917d3f082fe4cd72"}'
      _is_multipart: false
      _quote_fields: true
      _writer: !!python/object:aiohttp.multipart.MultipartWriter
        _boundary: !!binary |
          ZWQxZjYxZTljZGMyNGJiMTljNTJjNzQyZDY0OWI0M2Y=
        _encoding: null
        _filename: null
        _headers: !!python/object/apply:multidict._multidict.CIMultiDict
        - - !!python/tuple
            - !!python/object/apply:multidict._multidict.istr
              - Content-Type
            - multipart/form-data; boundary=ed1f61e9cdc24bb19c52c742d649b43f
        _is_form_data: true
        _parts: []
        _value: null
    headers:
      User-Agent:
      - soliplex-agent
    method: POST
    uri: http://localhost:8000/api/v1/source-status
  response:
    body:
      string: '{"/gitea_admin/vcr-test-sync-issue/issues/1":{"hash":"ffc653ca77fc72849856da353224fb54282b9482d4a6fe51917d3f082fe4cd72","status":"new"}}'
    headers:
      Content-Length:
      - '136'
      Content-Type:
      - application/json
      Date:
      - Tue, 03 Feb 2026 23:15:58 GMT
      Server:
      - uvicorn
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      User-Agent:
      - soliplex-agent
    method: GET
    uri: http://localhost:8000/api/v1/batch/
  response:
    body:
      string: '[{"source":"gitea:gitea_admin:test-repo","name":"gitea:gitea_admin:test-repo","completed_date":null,"id":1,"start_date":"2026-02-03T21:24:53.437774","batch_params":{},"duration":null},{"source":"gitea:gitea_admin:issues_only","name":"gitea:gitea_admin:issues_only","completed_date":null,"id":2,"start_date":"2026-02-03T23:06:56.048060","batch_params":{},"duration":null},{"source":"gitea:gitea_admin:vcr-test-inventory-file","name":"gitea:gitea_admin:vcr-test-inventory-file","completed_date":null,"id":3,"start_date":"2026-02-03T23:15:56.075701","batch_params":{},"duration":null}]'
    headers:
      Content-Length:
      - '582'
      Content-Type:
      - application/json
      Date:
      - Tue, 03 Feb 2026 23:15:58 GMT
      Server:
      - uvicorn
    status:
      code: 200
      message: OK
- request:
    body: !!python/object:aiohttp.formdata.FormData
      _charset: null
      _fields:
      - !!python/tuple
        - !!python/object/apply:multidict._multidict.MultiDict
          - - !!python/tuple
              - name
              - source
        - {}
        - gitea:gitea_admin:vcr-test-sync-issue
      - !!python/tuple
        - !!python/object/apply:multidict._multidict.MultiDict
          - - !!python/tuple
              - name
              - name
        - {}
        - gitea:gitea_admin:vcr-test-sync-issue
      _is_multipart: false
      _quote_fields: true
      _writer: !!python/object:aiohttp.multipart.MultipartWriter
        _boundary: !!binary |
          YWMzZDE3ZTlkODk0NGQ1MmE4MTBlNmI0MmQ2YjU3NzE=
        _encoding: null
        _filename: null
        _headers: !!python/object/apply:multidict._multidict.CIMultiDict
        - - !!python/tuple
            - !!python/object/apply:multidict._multidict.istr
              - Content-Type
            - multipart/form-data; boundary=ac3d17e9d8944d52a810e6b42d6b5771
        _is_form_data: true
        _parts: []
        _value: null
    headers:
      User-Agent:
      - soliplex-agent
    method: POST
    uri: http://localhost:8000/api/v1/batch/
  response:
    body:
      string: '{"batch_id":4}'
    headers:
      Content-Length:
      - '14'
      Content-Type:
      - application/json
      Date:
      - Tue, 03 Feb 2026 23:15:59 GMT
      Server:
      - uvicorn
    status:
      code: 201
      message: Created
- request:
    body: !!python/object:aiohttp.formdata.FormData
      _charset: null
      _fields: []
      _is_multipart: true
      _quote_fields: true
      _writer: !!python/object:aiohttp.multipart.MultipartWriter
        _boundary: !!binary |
          YmFiOTBlY2IxNWY1NDY4MWIxOTZjOGJiZmNkZDliMzY=
        _consumed: true
        _encoding: null
        _filename: null
        _headers: !!python/object/apply:multidict._multidict.CIMultiDict
        - - !!python/tuple
            - !!python/object/apply:multidict._multidict.istr
              - Content-Type
            - multipart/form-data; boundary=bab90ecb15f54681b196c8bbfcdd9b36
        _is_form_data: true
        _parts:
        - !!python/tuple
          - !!python/object:aiohttp.payload.StringPayload
            _encoding: utf-8
            _filename: null
            _headers: !!python/object/apply:multidict._multidict.CIMultiDict
            - - !!python/tuple
                - !!python/object/apply:multidict._multidict.istr
                  - Content-Type
                - text/plain; charset=utf-8
              - !!python/tuple
                - !!python/object/apply:multidict._multidict.istr
                  - Content-Disposition
                - form-data; name="source"
            _size: 37
            _value: !!binary |
              Z2l0ZWE6Z2l0ZWFfYWRtaW46dmNyLXRlc3Qtc3luYy1pc3N1ZQ==
          - null
          - null
        - !!python/tuple
          - !!python/object:aiohttp.payload.StringPayload
            _encoding: utf-8
            _filename: null
            _headers: !!python/object/apply:multidict._multidict.CIMultiDict
            - - !!python/tuple
                - !!python/object/apply:multidict._multidict.istr
                  - Content-Type
                - text/plain; charset=utf-8
              - !!python/tuple
                - !!python/object/apply:multidict._multidict.istr
                  - Content-Disposition
                - form-data; name="source_uri"
            _size: 41
            _value: !!binary |
              L2dpdGVhX2FkbWluL3Zjci10ZXN0LXN5bmMtaXNzdWUvaXNzdWVzLzE=
          - null
          - null
        - !!python/tuple
          - !!python/object:aiohttp.payload.StringPayload
            _encoding: utf-8
            _filename: null
            _headers: !!python/object/apply:multidict._multidict.CIMultiDict
            - - !!python/tuple
                - !!python/object/apply:multidict._multidict.istr
                  - Content-Type
                - text/plain; charset=utf-8
              - !!python/tuple
                - !!python/object/apply:multidict._multidict.istr
                  - Content-Disposition
                - form-data; name="batch_id"
            _size: 1
            _value: !!binary |
              NA==
          - null
          - null
        - !!python/tuple
          - !!python/object:aiohttp.payload.StringPayload
            _encoding: utf-8
            _filename: null
            _headers: !!python/object/apply:multidict._multidict.CIMultiDict
            - - !!python/tuple
                - !!python/object/apply:multidict._multidict.istr
                  - Content-Type
                - text/plain; charset=utf-8
              - !!python/tuple
                - !!python/object/apply:multidict._multidict.istr
                  - Content-Disposition
                - form-data; name="doc_meta"
            _size: 140
            _value: !!binary |
              eyJkYXRlIjogIjIwMjYtMDItMDNUMjM6MTU6NTdaIiwgImFzc2lnbmVlIjogIk5vbmUiLCAic3Rh
              dGUiOiAib3BlbiIsICJjb21tZW50cyI6IDAsICJ0aXRsZSI6ICJ0ZXN0IGlzc3VlIiwgImNvbnRl
              bnQtdHlwZSI6ICJ0ZXh0L21hcmtkb3duIn0=
          - null
          - null
        - !!python/tuple
          - !!python/object:aiohttp.payload.StringPayload
            _encoding: utf-8
            _filename: null
            _headers: !!python/object/apply:multidict._multidict.CIMultiDict
            - - !!python/tuple
                - !!python/object/apply:multidict._multidict.istr
                  - Content-Type
                - text/plain; charset=utf-8
              - !!python/tuple
                - !!python/object/apply:multidict._multidict.istr
                  - Content-Disposition
                - form-data; name="mime_type"
            _size: 13
            _value: !!binary |
              dGV4dC9tYXJrZG93bg==
          - null
          - null
        - !!python/tuple
          - !!python/object:aiohttp.payload.BytesPayload
            _encoding: null
            _filename: null
            _headers: !!python/object/apply:multidict._multidict.CIMultiDict
            - - !!python/tuple
                - !!python/object/apply:multidict._multidict.istr
                  - Content-Type
                - binary/octet-stream
              - !!python/tuple
                - !!python/object/apply:multidict._multidict.istr
                  - Content-Disposition
                - form-data; name="file"; filename="1"
            _size: 243
            _value: !!binary |
              CiMgdGVzdCBpc3N1ZSAgSXNzdWUjMSBmb3IgZ2l0ZWFfYWRtaW4vdmNyLXRlc3Qtc3luYy1pc3N1
              ZSAgICAgIApjcmVhdGVkIGJ5IGdpdGVhX2FkbWluIG9uIDIwMjYtMDItMDNUMjM6MTU6NTdaIHN0
              YXRlPW9wZW4gICAgICAKCiAgYXNzaWduZWQgdG86IAogIApUaGlzIGlzIGEgdGVzdCBpc3N1ZSBm
              b3IgaW5jcmVtZW50YWwgc3luYyB0ZXN0aW5nLgojIyBDb21tZW50cyAgICAgICAgICAgICAgICAg
              ICAgICAgICAgICAgICAK
          - null
          - null
        _value: null
    headers:
      User-Agent:
      - soliplex-agent
    method: POST
    uri: http://localhost:8000/api/v1/document/ingest-document
  response:
    body:
      string: '{"batch_id":4,"document_uri":"/gitea_admin/vcr-test-sync-issue/issues/1","document_hash":"sha256-ffc653ca77fc72849856da353224fb54282b9482d4a6fe51917d3f082fe4cd72","source":"gitea:gitea_admin:vcr-test-sync-issue","uri_id":21}'
    headers:
      Content-Length:
      - '224'
      Content-Type:
      - application/json
      Date:
      - Tue, 03 Feb 2026 23:15:59 GMT
      Server:
      - uvicorn
    status:
      code: 201
      message: Created
- request:
    body: !!python/object:aiohttp.formdata.FormData
      _charset: null
      _fields:
      - !!python/tuple
        - !!python/object/apply:multidict._multidict.MultiDict
          - - !!python/tuple
              - name
              - commit_sha
        - {}
        - null
      - !!python/tuple
        - !!python/object/apply:multidict._multidict.MultiDict
          - - !!python/tuple
              - name
              - branch
        - {}
        - main
      _is_multipart: false
      _quote_fields: true
      _writer: !!python/object:aiohttp.multipart.MultipartWriter
        _boundary: !!binary |
          NjcyYThkYWRmMzQ1NDRmYjg2OWNjOWU3Mzc2Y2RjM2U=
        _encoding: null
        _filename: null
        _headers: !!python/object/apply:multidict._multidict.CIMultiDict
        - - !!python/tuple
            - !!python/object/apply:multidict._multidict.istr
              - Content-Type
            - multipart/form-data; boundary=672a8dadf34544fb869cc9e7376cdc3e
        _is_form_data: true
        _parts: []
        _value: null
    headers:
      User-Agent:
      - soliplex-agent
    method: PUT
    uri: http://localhost:8000/api/v1/sync-state/gitea:gitea_admin:vcr-test-sync-issue
  response:
    body:
      string: '{"source_id":"gitea:gitea_admin:vcr-test-sync-issue","last_commit_sha":"None","last_sync_date":"2026-02-03T23:16:00.161915","branch":"main","sync_metadata":{}}'
    headers:
      Content-Length:
      - '159'
      Content-Type:
      - application/json
      Date:
      - Tue, 03 Feb 2026 23:15:59 GMT
      Server:
      - uvicorn
    status:
      code: 200
      message: OK
- request:
    body: null
    headers: {}
    method: DELETE
    uri: http://localhost:3000/api/v1/repos/gitea_admin/vcr-test-sync-issue
  response:
    body:
      string: ''
    headers:
      Cache-Control:
      - max-age=0, private, must-revalidate, no-transform
      Date:
      - Tue, 03 Feb 2026 23:16:00 GMT
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - SAMEORIGIN
    status:
      code: 204
      message: No Content
version: 1
